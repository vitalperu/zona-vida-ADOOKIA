<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zona Vida Radio</title>

  <!-- Google Fonts y Material Icons -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:600,700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- Materialize CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"/>
  <link rel="stylesheet" href="style.css" />

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#5e2760" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  

</head>
<body>
  <!-- NAVBAR (igual, puedes personalizar) -->
  <nav class="white z-depth-1">
    <div class="nav-wrapper container">
      <div class="nav-logo-socials">
        <img src="./img/logosuperior-zona-vida.png" alt="Zona Vida Radio" style="height:35px; margin-top:5px; display:none;" />
<div class="nav-socials" style="display: flex; align-items: center; gap: 12px; margin-left: 20px;">
  <a href="https://www.youtube.com/@enlaceperutv" target="_blank" style="color: #FF0000; font-size: 22px;">
    <i class="fab fa-youtube"></i>
  </a>
  <a href="https://facebook.com" target="_blank" style="color: #1877F2; font-size: 22px;">
    <i class="fab fa-facebook"></i>
  </a>
  <a href="https://tiktok.com" target="_blank" style="color: #000000; font-size: 22px;">
    <i class="fab fa-tiktok"></i>
  </a>
  <a href="https://instagram.com" target="_blank" style="color: #E4405F; font-size: 22px;">
    <i class="fab fa-instagram"></i>
  </a>
  <a href="https://wa.me/51900000000" target="_blank" style="color: #25D366; font-size: 22px;">
    <i class="fab fa-whatsapp"></i>
  </a>
  <a href="#" onclick="shareApp()" style="color: #FF9800; font-size: 22px;" title="Compartir">
  <i class="fas fa-share-alt"></i>
</a>
<a href="#" onclick="closeApp()" style="color: #F44336; font-size: 22px;" title="Salir">
  <i class="fas fa-times-circle"></i>
</a>

</div>

      </div>
      <a href="#" data-target="mobile-menu" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul class="nav-menu right">
        <li><a href="#">Inicio</a></li>
        <li><a href="#">Programas</a></li>
        <li><a href="#">Contacto</a></li>
      </ul>
    </div>
  </nav>
  <ul class="sidenav" id="mobile-menu">
    <li><a href="#">Inicio</a></li>
    <li><a href="#">Programas</a></li>
    <li><a href="#">Contacto</a></li>
  </ul>
<!-- BOTÓN MÁS RADIOS (extra pequeño, alineado a la izquierda) -->
<div style="margin: 6px 0 0 8px;">
  <button id="btnMasRadios" class="btn" style="background-color:#FF4081; color:white; height: 21px; line-height: 22px; padding: 0 4px; font-size: 11px; border-radius: 16px; min-width: auto;">
    <i class="material-icons left" style="font-size: 16px; margin-right: 4px;">add</i> Radios
  </button>
</div>

  <!-- PLAYER Y PARRILLA -->
  <div class="player-app-container">
    
    
    <!-- REPRODUCTOR -->
    <div class="circle-player" id="player-visual">
      <img src="./img/logo-zona-vida.png" id="logoRadioActual" alt="Zona Vida Radio" />
    </div>

    <!-- BOTÓN INSTALAR APP -->
<div class="install-button-wrapper">
  <button id="installBtn" class="install-btn">
    <i class="fab fa-android" style="color:#A4C639; font-size:20px;"></i>
    <i class="fab fa-apple" style="color:#999; font-size:20px; margin-left:5px;"></i>
    Instalar App
  </button>
</div>

    <!-- CONTROLES -->
    <div class="radio-controls-wrapper">
      <audio id="player" preload="auto">
        <source src="https://radio.zonavidahd.online/listen/hd/radio.mp3" type="audio/mpeg" />
        Tu navegador no soporta audio en línea.
      </audio>
      <div class="radio-controls">
        <button id="playPauseBtn" class="play-btn">
          <i id="playPauseIcon" class="material-icons">play_arrow</i> 
        </button>
        <input id="volumeBar" type="range" min="0" max="1" step="0.01" value="1" />
        <span id="volIcon" style="vertical-align: middle;">
          <i id="muteIcon" class="material-icons">volume_up</i>
        </span>
        <span id="volValue">100%</span>
      </div>
    </div>

    <!-- PARRILLA DE RADIOS PRINCIPAL-->
<div id="parrillaPrincipal" class="radio-grid-scroll">
  <div class="radio-grid-background">
    <div class="radio-grid">
      
      <div class="radio-item selected" data-logo="img/logo-zona-vida.png" data-radio="https://radio.zonavidahd.online/listen/hd/radio.mp3">
        <div class="radio-container">
          <img src="https://vitalperu.github.io/zona-vida-ADOOKIA/img/logo-zona-vida.png" alt="Zona Vida" />
          <div class="radio-name">Zona Vida</div>
        </div>
      </div>

<div class="radio-item selected" data-logo="img/logo-zv-latino.png" data-radio="https://stream.zeno.fm/r4dvb9ienyavv">
  <div class="radio-container">
    <img src="https://vitalperu.github.io/zona-vida-ADOOKIA/img/logo-zv-latino.png" alt="Zona Vida" />
    <div class="radio-name">ZV Latino</div>
  </div>
</div>
      
 <div class="radio-item selected" data-logo="img/logo-zv-latino.png" data-radio="https://stream.zeno.fm/r4dvb9ienyavv">
  <div class="radio-container">
    <img src="https://vitalperu.github.io/zona-vida-ADOOKIA/img/logo-zv-latino.png" alt="Zona Vida" />
    <div class="radio-name">ZV Latino</div>
  </div>
</div>
      
 <div class="radio-item selected" data-logo="img/logo-zv-latino.png" data-radio="https://stream.zeno.fm/r4dvb9ienyavv">
  <div class="radio-container">
    <img src="https://vitalperu.github.io/zona-vida-ADOOKIA/img/logo-zv-latino.png" alt="Zona Vida" />
    <div class="radio-name">ZV Latino</div>
  </div>
</div>     
       
  </div>
</div>

  <!-- Materialize y tu JS -->
 <!-- Materialize JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

<!-- Tu código JS -->
<script>
// Selección de radios y cambio de logo/stream
document.querySelectorAll('.radio-item').forEach(function(item){
  item.addEventListener('click', function(){
    document.querySelectorAll('.radio-item').forEach(i => i.classList.remove('selected'));
    item.classList.add('selected');
    document.getElementById('logoRadioActual').src = item.getAttribute('data-logo');
    var player = document.getElementById('player');
    player.src = item.getAttribute('data-radio');
    player.load();
    player.play();
    document.getElementById('playPauseIcon').textContent = 'pause';
    document.querySelector('.circle-player').classList.add('playing'); 
  });
});

// Play/Pause
const playPauseBtn = document.getElementById('playPauseBtn');
const playPauseIcon = document.getElementById('playPauseIcon');
const player = document.getElementById('player');

playPauseBtn.addEventListener('click', function(){
  if(player.paused){
    player.play();
    playPauseIcon.textContent = 'pause';
    document.querySelector('.circle-player').classList.add('playing');
  } else {
    player.pause();
    playPauseIcon.textContent = 'play_arrow';
    document.querySelector('.circle-player').classList.remove('playing');
  }
});

// Volumen y mute con icono altavoz
const volumeBar = document.getElementById('volumeBar');
const volIcon = document.getElementById('muteIcon');
const volValue = document.getElementById('volValue');

volIcon.addEventListener('click', () => {
  player.muted = !player.muted;
  if (player.muted) {
    volIcon.textContent = 'volume_off';
    volumeBar.value = 0;
  } else {
    volIcon.textContent = 'volume_up';
    volumeBar.value = player.volume || 1;
  }
  volValue.textContent = Math.round(volumeBar.value * 100) + '%';
});

volumeBar.addEventListener('input', () => {
  player.volume = volumeBar.value;
  if (player.volume == 0) {
    player.muted = true;
    volIcon.textContent = 'volume_off';
  } else {
    player.muted = false;
    volIcon.textContent = 'volume_up';
  }
  volValue.textContent = Math.round(volumeBar.value * 100) + '%';
});

// Registro de Service Worker
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js').then(function(registration) {
      console.log('Service Worker registrado con éxito:', registration.scope);
    }).catch(function(error) {
      console.log('Error al registrar Service Worker:', error);
    });
  });
}

// Botón instalar PWA
let deferredPrompt;
const installBtn = document.getElementById('installBtn');

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = 'inline-block';
});

installBtn.addEventListener('click', async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if (outcome === 'accepted') {
      console.log('App instalada correctamente');
      installBtn.textContent = "¡Instalada!";
    }
    deferredPrompt = null;
  } else {
    alert("Para instalar, usa Chrome, Brave o Edge.");
  }
});
function shareApp() {
  if (navigator.share) {
    navigator.share({
      title: 'Zona Vida Radio',
      text: 'Escucha Zona Vida Radio en tu dispositivo.',
      url: window.location.href
    }).then(() => {
      console.log('Compartido con éxito');
    }).catch((error) => {
      console.error('Error al compartir:', error);
    });
  } else {
    alert("Tu navegador no soporta la función de compartir.");
  }
}

function closeApp() {
  if (confirm("¿Quieres salir de la app?")) {
    window.close();
  }
}

// Inicializar el menú hamburguesa
document.addEventListener('DOMContentLoaded', function() {
  var sidenavs = document.querySelectorAll('.sidenav');
  M.Sidenav.init(sidenavs);
});
  
</script>
</body>
</html>
